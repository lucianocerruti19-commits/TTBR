<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TOTOBAR</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#111;
  color:white;
  text-align:center;
}

h1{
  color:gold;
  text-shadow:0 0 10px goldenrod;
}

input,button{
  padding:10px;
  margin:5px;
  border:none;
  border-radius:8px;
}

button{
  background:linear-gradient(45deg,gold,orange);
  font-weight:bold;
  cursor:pointer;
}

.panel{
  display:none;
  padding:20px;
}

.producto{
  background:#222;
  margin:10px;
  padding:10px;
  border-radius:10px;
}

.carrito{
  background:#1a1a1a;
  padding:15px;
  margin-top:20px;
  border-radius:10px;
}
</style>
</head>
<body>

<h1>TOTOBAR</h1>

<!-- LOGIN -->
<div id="login">
  <input id="usuario" placeholder="Usuario"><br>
  <input id="clave" type="password" placeholder="Contraseña"><br>
  <button onclick="entrar()">Ingresar</button>
</div>

<!-- CLIENTE -->
<div id="cliente" class="panel">
  <h2>Menú TOTOBAR</h2>
  <div id="menu"></div>

  <div class="carrito">
    <h3>Carrito</h3>
    <div id="listaCarrito"></div>
    <h3>Total: $<span id="total">0</span></h3>
    <button onclick="finalizarDemo()">Simular Pedido</button>
  </div>
</div>

<script>
const usuarios={
  admin:{clave:"1234",link:"admin.html"},
  dueño:{clave:"1234",link:"due%C3%B1o.html"},
  mozo:{clave:"1234",link:"waiter.html"},
  cocina:{clave:"1234",link:"kitchen.html"},
  cliente:{clave:"1234",panel:"cliente"}
};

function entrar(){
  const u=document.getElementById("usuario").value;
  const c=document.getElementById("clave").value;

  if(!usuarios[u] || usuarios[u].clave!==c){
    alert("Datos incorrectos");
    return;
  }

  if(u==="cliente"){
    document.getElementById("login").style.display="none";
    document.getElementById("cliente").style.display="block";
    cargarMenu();
  }else{
    window.location.href=usuarios[u].link;
  }
}

const productos=[
  {nombre:"Cerveza",precio:1500},
  {nombre:"Fernet",precio:2500},
  {nombre:"Hamburguesa",precio:3500},
  {nombre:"Papas",precio:2000}
];

let carrito=[];
let total=0;

function cargarMenu(){
  const cont=document.getElementById("menu");
  cont.innerHTML="";
  productos.forEach(p=>{
    cont.innerHTML+=`
      <div class="producto">
        <h3>${p.nombre}</h3>
        <p>$${p.precio}</p>
        <button onclick="agregar('${p.nombre}',${p.precio})">Agregar</button>
      </div>
    `;
  });
}

function agregar(nombre,precio){
  carrito.push({nombre,precio});
  total+=precio;
  renderCarrito();
}

function renderCarrito(){
  const lista=document.getElementById("listaCarrito");
  lista.innerHTML="";
  carrito.forEach((p,i)=>{
    lista.innerHTML+=`
      <p>${p.nombre} - $${p.precio}
      <button onclick="eliminar(${i})">❌</button></p>
    `;
  });
  document.getElementById("total").innerText=total;
}

function eliminar(i){
  total-=carrito[i].precio;
  carrito.splice(i,1);
  renderCarrito();
}

function finalizarDemo(){
  if(carrito.length===0){
    alert("Agregá productos primero");
    return;
  }

  alert("Pedido simulado.\nTotal: $" + total);

  carrito=[];
  total=0;
  renderCarrito();
}
</script>

</body>
</html>