<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOTOBAR</title>

<style>
body{
  margin:0;
  background:radial-gradient(circle at top,#111,#050505 70%);
  color:#f5d28a;
  font-family:Arial, sans-serif;
}

header{
  text-align:center;
  padding:30px 10px;
  background:#0b0b0b;
  border-bottom:2px solid #d4af37;
  box-shadow:0 4px 20px rgba(212,175,55,0.2);
}

.logo{
  width:220px;
  display:block;
  margin:0 auto;
}

h2{
  margin-top:10px;
  letter-spacing:2px;
}

.section{
  display:none;
  padding:25px;
}

/* BOTONES ORO METÁLICO PREMIUM */
button{
  padding:18px;
  border:none;
  border-radius:20px;
  background:linear-gradient(145deg,#f8e7a0,#d4af37,#a67c00);
  color:#000;
  font-weight:bold;
  font-size:16px;
  cursor:pointer;
  transition:all 0.25s ease;
  box-shadow:
    inset 0 3px 6px rgba(255,255,255,0.5),
    inset 0 -4px 8px rgba(0,0,0,0.4),
    0 8px 18px rgba(212,175,55,0.35);
}

button:hover{
  transform:translateY(-2px);
}

button:active{
  transform:scale(0.95);
}

/* CATEGORÍAS 3 EN 3 CENTRADAS */
.tabs{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:14px;
  margin:20px auto;
  max-width:750px;
}

/* TARJETAS PRODUCTOS */
.card{
  background:linear-gradient(145deg,#111,#0a0a0a);
  padding:18px;
  border-radius:18px;
  margin-bottom:15px;
  border:1px solid #222;
  box-shadow:0 6px 20px rgba(0,0,0,0.6);
  transition:0.2s;
}

.card:hover{
  transform:scale(1.02);
  border:1px solid #d4af37;
}
</style>
</head>
<body>

<header>
  <img src="logo.png" class="logo">
  <h2>TOTOBAR</h2>
</header>

<!-- SELECTOR -->
<div id="selector" class="section" style="display:block;">
  <h3 style="text-align:center;">Seleccionar modo</h3>
  <div class="tabs">
    <button onclick="login('cliente')">Cliente</button>
    <button onclick="login('mozo')">Mozo</button>
    <button onclick="login('cocina')">Cocina</button>
    <button onclick="login('admin')">Admin</button>
    <button onclick="login('dueno')">Dueño</button>
  </div>
</div>

<!-- CLIENTE -->
<div id="cliente" class="section">
  <button onclick="mostrar('selector')">⬅ Volver</button>
  <h3 style="text-align:center;">Menú</h3>
  <div class="tabs" id="tabsCategorias"></div>
  <div id="productos"></div>
</div>

<audio id="clickSound" src="click.mp3"></audio>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "TU_API_KEY",
  authDomain: "menu-pro-app.firebaseapp.com",
  projectId: "menu-pro-app",
  storageBucket: "menu-pro-app.firebasestorage.app",
  messagingSenderId: "42917274964",
  appId: "1:42917274964:web:3be3c9c124b9c69b8994c1"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let categorias = [];
let productos = [];

function cargarCategorias(){
  onSnapshot(collection(db,"categorias"), snap=>{
    categorias=[];
    snap.forEach(d=>{
      categorias.push(d.data().nombre);
    });
    renderTabs();
  });
}

function cargarProductos(){
  onSnapshot(collection(db,"productos"), snap=>{
    productos=[];
    snap.forEach(d=>{
      productos.push(d.data());
    });
  });
}

function renderTabs(){
  const tabs=document.getElementById("tabsCategorias");
  tabs.innerHTML="";
  categorias.forEach(cat=>{
    tabs.innerHTML+=`<button onclick="mostrarCat('${cat}')">${cat}</button>`;
  });
}

window.mostrarCat = (cat)=>{
  const prodDiv=document.getElementById("productos");
  prodDiv.innerHTML="";

  productos.forEach(p=>{
    if(p.categoria === cat){
      prodDiv.innerHTML+=`
        <div class="card">
          <h4>${p.nombre}</h4>
          <p>$${p.precio}</p>
        </div>
      `;
    }
  });

  reproducirSonido();
};

function reproducirSonido(){
  const audio=document.getElementById("clickSound");
  audio.currentTime=0;
  audio.play();
}

window.login=(rol)=>{
  if(rol==="cliente"){
    mostrar("cliente");
    return;
  }

  const pass=prompt("Contraseña:");
  if(!pass) return;

  if(rol==="mozo" && pass==="mozo2026") window.location.href="waiter.html";
  else if(rol==="cocina" && pass==="cocina2026") window.location.href="kitchen.html";
  else if(rol==="admin" && pass==="toto321") window.location.href="admin.html";
  else if(rol==="dueno" && pass==="toto321") window.location.href="dueño.html";
  else alert("Contraseña incorrecta");
};

window.mostrar=(id)=>{
  document.querySelectorAll(".section").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
};

cargarCategorias();
cargarProductos();
</script>

</body>
</html>